!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=4)}([function(e,n){e.exports=require("path")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("child_process")},function(e,n){e.exports=require("express-sse")},function(e,n,t){"use strict";t.r(n);var o=t(0),r=t.n(o),s=t(1),i=t.n(s),c=t(2),u=t(3);function a(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=new(t.n(u).a)(["sse init"]),l=new(function(){var e,n,t;function o(e){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o),this.path=e,this.process=Object(c.spawn)(this.path),this.process.stdout.on("data",function(e){n.processstdout("".concat(e))}),this.process.stderr.on("data",function(e){n.processstdout("".concat(e))}),setInterval(function(){f.send("engine alive")},5e3)}return e=o,(n=[{key:"processstdout",value:function(e){f.send(e)}},{key:"issuecommand",value:function(e){this.process.stdin.write(e+"\n")}}])&&a(e.prototype,n),t&&a(e,t),o}())(process.env.REXPACKDEV?"./dist_dev/src/bin/stockfish":"/app/dist/src/bin/stockfish");var p,d,v,m,b=i()(),g=__dirname,y=(r.a.join(g,"index.html"),process.env.PORT||8080);p=b,d=y,v=g,m=i.a,p.use(m.static(v)),p.use(m.json()),p.get("/stream",f.init),p.post("/enginecommand",function(e,n){var t=e.body.command;console.log("issueing engine comamnd : ".concat(t)),l.issuecommand(t),n.send("issued engine command ok : ".concat(t))}),p.get("*",function(e,n){n.sendFile(r.a.join(v,e.url))}),p.listen(d,function(){console.log("App listening at ".concat(d,"....")),console.log("Press Ctrl+C to quit.")})}]);